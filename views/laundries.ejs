<%-include('partials/header.ejs' , {title : 'List Laundry'}) %>
<div>
  <p><a href="laundry/add"><button>Add New Laundry</button></a></p>
</div>
<div><h2>Processed Laundry</h2></div>
  <div>
    <table border="1">
      <thead>
        <tr>
          <th>ID</th>
          <th>Customer</th>
          <th>Employee</th>
          <th>Laundry Type</th>
          <th>Weight</th>
          <th>Entry Date</th>
          <th>Total Cost</th>
        </tr>
      </thead>
      <tbody>
        <% laundries.forEach(laundry => { %>
        <tr>
          <td><a href="/laundry/<%= laundry.id %>"><%= laundry.id %></a></td>
          <td><%= laundry.Customer.name %></td>
          <td><%= laundry.Employee.name %></td>
          <td><%= laundry.laundry_type %></td>
          <td><%= laundry.getKg() %></td>
          <td><%= moment(laundry.entry_date).format('YYYY-MM-DD') %></td>
          <td><%= costFormat(laundry.total_cost) %></td>
          <td>
            <a href="/laundry/edit/<%= laundry.id %>"><button>Edit</button></a>
            <a href="/laundry/<%= laundry.id %>/finished"><button type="submit">Finish</button></a>
          </td>
        </tr>
        <% }) %> 
      </tbody>
    </table>
  </div>
  <div><h2>Finished Laundry</h2></div>
  <div>
    <table border="1">
      <thead>
        <tr>
          <th>ID</th>
          <th>Customer</th>
          <th>Employee</th>
          <th>Laundry Type</th>
          <th>Weight</th>
          <th>Entry Date</th>
          <th>Finish Date</th>
          <th>Process Days</th>
          <th>Total Cost</th>
        </tr>
      </thead>
      <tbody>
        <% if (laundriesFinished) { %>
          <% laundriesFinished.forEach(laundryFinished => { %>
          <tr>
            <td><%= laundryFinished.id %></td>
            <td><%= laundryFinished.Customer.name %></td>
            <td><%= laundryFinished.Employee.name %></td>
            <td><%= laundryFinished.laundry_type %></td>
            <td><%= laundryFinished.getKg() %></td>
            <td><%= moment(laundryFinished.entry_date).format('YYYY-MM-DD') %></td>
            <td><%= moment(laundryFinished.finish_date).format('YYYY-MM-DD') %></td>
            <td><%= laundryFinished.process_days %></td>
            <td><%= laundryFinished.total_cost %><td></td>
            <td>
              <button type="submit">Notify</button>
              <a href=""><button>Taken</button></a>
            </td>
          </tr>
          <% }) %> 
        <% } %>
      </tbody>
    </table>
  </div>
<%-include('partials/footer.ejs') %>
